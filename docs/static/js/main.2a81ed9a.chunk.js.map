{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["polyfill","dragImageTranslateOverride","scrollBehaviourDragImageTranslateOverride","window","addEventListener","A4","Letter","Fit","Portrait","Landscape","None","Small","Big","App","React","Component","constructor","props","super","clearSelection","imgArr","this","state","images","forEach","img","selected","setState","readfiles","async","console","log","fileList","length","imageCountError","concat","setTimeout","undefined","errorCount","i","type","imgDataUrl","URL","createObjectURL","uuid","uuidv4","push","id","file","error","name","loadImage","objUrl","Promise","resolve","reject","Image","onload","onerror","e","src","fetchImage","dataURL","quality","canvas","document","createElement","ctx","getContext","width","height","drawImage","blob","canvasToBlob","raw","arrayBuffer","originalMime","fetch","headers","get","mime","res","createPdf","busy","pdfDoc","PDFDocument","create","pageSize","getPageSize","compressImages","imageQuality","embeddedImage","jpegOrientation","jpegExif","EXIF","readFromBinaryFile","ex","embedJpg","pngBlob","toBlob","pngArrayBuffer","embedPng","webpError","page","addPage","x","y","scaleFactor","Math","min","getWidth","pageMargin","getHeight","dim","scale","setRotation","degrees","pdfBytes","save","Blob","link","href","download","click","err","lastError","lastMime","deletePage","arr","indexPosition","index","splice","handleDrop","droppedId","currentId","droppedIndex","droppedImage","currentIndex","pageOrientation","PageSizes","reverse","getAspectRatio","forceShowOption","fileInput","createRef","render","pageWrapper","border","display","background","position","pageStyle","margin","flex","backgroundSize","backgroundRepeat","backgroundPosition","ceil","boxShadow","landing","_jsxs","className","children","style","padding","_jsx","onClick","current","onDragStart","onDrop","stopPropagation","preventDefault","files","dataTransfer","onDragOver","onDragEnter","listView","flexWrap","justifyContent","map","draggable","effectAllowed","setData","getData","_objectSpread","imgArr1","right","top","color","backgroundImage","pageMarginSection","paddingBottom","fontSize","paddingTop","flexDirection","textAlign","imageQualitySelector","optionStyle","closeBtn","options","actions","borderTop","paddingLeft","paddingRight","pageHeader","transform","errorMessage","backgroundColor","borderRadius","ref","onChange","multiple","overflow","accept","readExif","replace","c","r","random","toString","reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2a81ed9a.chunk.js","sourcesContent":["import './App.css';\r\nimport React from 'react';\r\nimport { PageSizes, PDFDocument, degrees } from 'pdf-lib'\r\nimport EXIF from 'exif-js';\r\nimport { polyfill } from \"mobile-drag-drop\";\r\n\r\n// optional import of scroll behaviour\r\nimport { scrollBehaviourDragImageTranslateOverride } from \"mobile-drag-drop/scroll-behaviour\";\r\n\r\n// options are optional ;)\r\npolyfill({\r\n  // use this to make use of the scroll behaviour\r\n  dragImageTranslateOverride: scrollBehaviourDragImageTranslateOverride\r\n});\r\n\r\nwindow.addEventListener('touchmove', function () { });\r\n\r\nconst A4 = \"A4\", Letter = \"US Letter\", Fit = \"Same as Image\", Portrait = \"Portrait\", Landscape = \"Landscape\", None = \"0\", Small = \"20\", Big = \"50\";\r\nconst MAX_IMAGES = 300;\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      images: [],\r\n      pageOrientation: Portrait,\r\n      pageSize: A4,\r\n      pageMargin: None,\r\n      lastError: undefined,\r\n      lastMime: undefined,\r\n      forceShowOption: false,\r\n      compressImages: false,\r\n      imageQuality: 8,\r\n      busy: false,\r\n      imageCountError: undefined\r\n    };\r\n    this.fileInput = React.createRef();\r\n  }\r\n  render() {\r\n    let pageWrapper = {\r\n      height: \"192px\",\r\n      width: \"192px\",\r\n      border: \"none\",\r\n      display: \"flex\",\r\n      background: \"white\",\r\n      position: \"relative\"\r\n    };\r\n\r\n    let pageStyle = {\r\n      margin: '0px',\r\n      flex: \"1\",\r\n      backgroundSize: \"contain\",\r\n      backgroundRepeat: \"no-repeat\",\r\n      backgroundPosition: \"center\"\r\n    };\r\n\r\n    if (this.state.pageMargin === Small) {\r\n      pageStyle.margin = \"5px\";\r\n    } else if (this.state.pageMargin === Big) {\r\n      pageStyle.margin = \"10px\";\r\n    }\r\n\r\n    if (this.state.pageSize !== Fit) {\r\n      pageWrapper.width = Math.ceil(192 * this.getAspectRatio()) + 'px';\r\n      pageWrapper.boxShadow = \"5px 5px 5px rgb(200,200,200)\";\r\n    }\r\n\r\n    const landing = (<div className=\"landing-page\">\r\n      <div style={{ padding: \"40px\" }}>\r\n        Convert JPEG, PNG or WebP images to PDF without uploading your sensitve data anywhere.\r\n      <br />\r\n      Files are processed entirely on your device and does not get uploaded to any server.\r\n      </div>\r\n      <button onClick={() => this.fileInput.current.click()} className=\"big-btn\">Select Images</button>\r\n      <div className=\"dropzone\"\r\n        onDragStart={(e) => {\r\n        }}\r\n        onDrop={(e) => {\r\n          if (e.stopPropagation) {\r\n            e.stopPropagation(); // stops the browser from redirecting.\r\n          }\r\n          if (e.preventDefault) {\r\n            e.preventDefault(); // stops the browser from redirecting.\r\n          }\r\n          let files = e.dataTransfer.files;\r\n          this.readfiles(files);\r\n        }}\r\n        onDragOver={(e) => {\r\n          if (e.preventDefault) {\r\n            e.preventDefault(); // stops the browser from redirecting.\r\n          }\r\n        }}\r\n        onDragEnter={(e) => { e.preventDefault(); }}>or drop images here</div>\r\n    </div>);\r\n\r\n    const listView = (<div style={{ display: 'flex', flexWrap: 'wrap', flex: \"1\", justifyContent: \"center\" }} >\r\n      {this.state.images.map((img, index) => (\r\n        <div\r\n          style={{ padding: \"5px\" }}\r\n          key={img.id + \"\"}\r\n          draggable={true}\r\n          onDragStart={(e) => {\r\n            e.dataTransfer.effectAllowed = 'move';\r\n            e.dataTransfer.setData('text/plain', img.id);\r\n            console.log(\"Drag start \" + index);\r\n          }}\r\n          onDrop={(e) => {\r\n            if (e.stopPropagation) {\r\n              e.stopPropagation(); // stops the browser from redirecting.\r\n            }\r\n            let droppedId = e.dataTransfer.getData(\"text/plain\");\r\n            console.log(\"droppedId: \" + droppedId);\r\n            this.handleDrop(droppedId, img.id);\r\n          }}\r\n          onDragOver={(e) => {\r\n            if (e.preventDefault) {\r\n              e.preventDefault(); // stops the browser from redirecting.\r\n            }\r\n          }}\r\n          onDragEnter={(e) => { e.preventDefault(); }}\r\n        >\r\n          <div style={{ ...pageWrapper }}\r\n            onClick={\r\n              (e) => {\r\n                let imgArr1 = [...this.state.images];\r\n                for (let x = 0; x < imgArr1.length; x++) {\r\n                  imgArr1[x] = { ...imgArr1[x], selected: imgArr1[x].id === img.id };\r\n                }\r\n                this.setState({ images: [...imgArr1] });\r\n                e.stopPropagation();\r\n              }\r\n            }\r\n          >\r\n            <div style={{\r\n              display: img.selected ? \"block\" : \"none\", position: \"absolute\",\r\n              right: \"0px\", top: \"0px\", padding: \"5px\", color: \"rgb(180,180,180)\"\r\n            }} onClick={(e) => { e.stopPropagation(); this.deletePage(img.id); }} ><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></div>\r\n            <div style={{ ...pageStyle, backgroundImage: \"url('\" + img.imgDataUrl + \"')\" }}>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>);\r\n\r\n    const pageMarginSection = (<div>\r\n      <div style={{ paddingBottom: \"10px\", fontSize: \"16px\", color: \"gray\", paddingTop: \"20px\" }}>Page margin</div>\r\n      <div style={{ display: \"flex\" }}>\r\n        <div style={{\r\n          flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n          justifyContent: \"center\", textAlign: \"center\",\r\n          background: (this.state.pageMargin == None ? \"purple\" : \"rgb(240,240,240)\"),\r\n          color: (this.state.pageMargin == None ? \"white\" : \"black\"), padding: \"5px\"\r\n        }} onClick={() => this.setState({ pageMargin: None })}>None</div>\r\n        <div style={{\r\n          flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n          justifyContent: \"center\", textAlign: \"center\",\r\n          background: (this.state.pageMargin == Small ? \"purple\" : \"rgb(240,240,240)\"),\r\n          color: (this.state.pageMargin == Small ? \"white\" : \"black\"), padding: \"5px\"\r\n        }} onClick={() => this.setState({ pageMargin: Small })}>Small</div>\r\n        <div style={{\r\n          flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n          justifyContent: \"center\", textAlign: \"center\",\r\n          background: (this.state.pageMargin == Big ? \"purple\" : \"rgb(240,240,240)\"),\r\n          color: (this.state.pageMargin == Big ? \"white\" : \"black\"), padding: \"5px\"\r\n        }} onClick={() => this.setState({ pageMargin: Big })}>Big</div>\r\n      </div>\r\n    </div>);\r\n\r\n    const imageQualitySelector = (<div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\" }}>Image quality</div>\r\n      <div style={{ display: \"flex\" }}>\r\n        <div style={{ padding: \"5px\" }}>\r\n          <button onClick={() => {\r\n            if (this.state.imageQuality < 10) {\r\n              this.setState({\r\n                imageQuality: +this.state.imageQuality + 1\r\n              });\r\n            }\r\n          }}>+</button>\r\n        </div>\r\n        <div style={{ padding: \"5px\" }}>\r\n          <div>{this.state.imageQuality / 10}</div>\r\n        </div>\r\n        <div style={{ padding: \"5px\" }} >\r\n          <button onClick={() => {\r\n            if (this.state.imageQuality > 1) {\r\n              this.setState({\r\n                imageQuality: +this.state.imageQuality - 1\r\n              });\r\n            }\r\n          }}>-</button>\r\n        </div>\r\n      </div>\r\n    </div>);\r\n\r\n    const optionStyle = {}\r\n    if (this.state.forceShowOption) {\r\n      optionStyle.display = \"block\"\r\n    }\r\n\r\n    const closeBtn = this.state.forceShowOption ? <span onClick={() => { this.setState({ forceShowOption: false }) }}>X</span> : <span></span>;\r\n\r\n    const options = (\r\n      <div className=\"options\" style={optionStyle}>\r\n        <div style={{ paddingBottom: \"10px\", fontSize: \"20px\", display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <span>Options</span>\r\n          {closeBtn}\r\n        </div>\r\n        <div style={{ paddingBottom: \"10px\", fontSize: \"16px\", color: \"gray\", paddingTop: \"10px\" }}>Page orientation</div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.pageOrientation == Portrait ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.pageOrientation == Portrait ? \"white\" : \"black\"), padding: \"5px\"\r\n          }}\r\n            onClick={() => this.setState({ pageOrientation: Portrait })}>Portrait</div>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.pageOrientation == Landscape ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.pageOrientation == Landscape ? \"white\" : \"black\"), padding: \"5px\"\r\n          }}\r\n            onClick={() => this.setState({ pageOrientation: Landscape })}>Landscape</div>\r\n        </div>\r\n        <div style={{ paddingBottom: \"10px\", fontSize: \"16px\", color: \"gray\", paddingTop: \"20px\" }}>Page size</div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.pageSize == A4 ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.pageSize == A4 ? \"white\" : \"black\"), padding: \"5px\"\r\n          }} onClick={() => this.setState({ pageSize: A4 })}>A4</div>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.pageSize == Letter ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.pageSize == Letter ? \"white\" : \"black\"), padding: \"5px\"\r\n          }} onClick={() => this.setState({ pageSize: Letter })}>US Letter</div>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.pageSize == Fit ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.pageSize == Fit ? \"white\" : \"black\"), padding: \"5px\"\r\n          }} onClick={() => this.setState({ pageSize: Fit })}>Same as Image</div>\r\n        </div>\r\n        {this.state.pageSize !== Fit ? pageMarginSection : (<div></div>)}\r\n        <div style={{ paddingBottom: \"10px\", fontSize: \"16px\", color: \"gray\", paddingTop: \"20px\" }}>Compression</div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (this.state.compressImages ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (this.state.compressImages ? \"white\" : \"black\"), padding: \"5px\"\r\n          }}\r\n            onClick={() => this.setState({ compressImages: true })}>Compress Images</div>\r\n          <div style={{\r\n            flex: \"1\", height: \"50px\", display: \"flex\", flexDirection: \"column\",\r\n            justifyContent: \"center\", textAlign: \"center\",\r\n            background: (!this.state.compressImages ? \"purple\" : \"rgb(240,240,240)\"),\r\n            color: (!this.state.compressImages ? \"white\" : \"black\"), padding: \"5px\"\r\n          }}\r\n            onClick={() => this.setState({ compressImages: false })}>Don't Compress</div>\r\n        </div>\r\n        {this.state.compressImages ? imageQualitySelector : (<div></div>)}\r\n      </div>\r\n    );\r\n    const actions = (<div style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"10px\", borderTop: \"1px solid rgb(200,200,200)\" }}>\r\n      <div style={{ display: \"flex\" }} >\r\n        <div style={{ paddingLeft: \"5px\", paddingRight: \"5px\" }}>\r\n          <button onClick={() => {\r\n            this.setState({\r\n              forceShowOption: true\r\n            });\r\n          }} className=\"option-btn button\">PDF Options</button>\r\n        </div>\r\n        <button onClick={() => this.fileInput.current.click()} className=\"button\">Add page</button>\r\n      </div>\r\n      <button onClick={this.createPdf} className=\"button\">Generate PDF</button>\r\n    </div>);\r\n\r\n    const pageHeader = (<div className=\"page-header\">\r\n      <span>CONVERT IMAGE TO PDF</span>\r\n      {this.state.images.length > 0 && (\r\n        <div style={{ \r\n          position: \"absolute\", \r\n          right: \"20px\", \r\n          top: \"50%\", \r\n          transform: \"translateY(-50%)\",\r\n          fontSize: \"14px\",\r\n          color: \"rgba(255,255,255,0.8)\"\r\n        }}>\r\n          {this.state.images.length} / {MAX_IMAGES} 图片\r\n        </div>\r\n      )}\r\n    </div>);\r\n\r\n    const errorMessage = this.state.imageCountError ? (\r\n      <div style={{\r\n        backgroundColor: \"#ff4444\",\r\n        color: \"white\",\r\n        padding: \"10px\",\r\n        textAlign: \"center\",\r\n        borderRadius: \"4px\",\r\n        margin: \"10px\"\r\n      }}>\r\n        {this.state.imageCountError}\r\n      </div>\r\n    ) : null;\r\n\r\n    if (this.state.images.length < 1) {\r\n      return <div>\r\n        {pageHeader}\r\n        {errorMessage}\r\n        <input type=\"file\" ref={this.fileInput} onChange={() => this.readfiles(this.fileInput.current.files)} multiple style={{ display: \"none\" }}></input>\r\n        {landing}\r\n      </div>\r\n    }\r\n\r\n    const busy = {};\r\n    if (this.state.busy) {\r\n      busy.display = \"flex\";\r\n    }\r\n\r\n    return (\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\", height: \"100%\", overflow: \"hidden\", flex: \"1\" }}>\r\n        {pageHeader}\r\n        {errorMessage}\r\n        <div style={{ display: \"flex\", overflow: \"hidden\", flex: \"1\" }}>\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\", flex: \"1\", overflow: \"auto\", background: \"rgb(240,240,240)\" }} onClick={this.clearSelection}>\r\n            {listView}\r\n            <div style={{ flex: \"1\" }}></div>\r\n          </div>\r\n          {options}\r\n        </div>\r\n        {actions}\r\n        <input type=\"file\" accept={\"image/*,.webp\"} ref={this.fileInput} onChange={() => this.readfiles(this.fileInput.current.files)} multiple style={{ display: \"none\" }} />\r\n        <div className=\"busy\" style={busy}>Generating PDF, Please wait...</div>\r\n      </div>\r\n\r\n    );\r\n\r\n    // return (\r\n    //   <div>\r\n    //     <div>This app is not styled yet</div>\r\n    //     <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n    //       {this.state.images.map((img, index) => (\r\n    //         <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n    //           <img src={img.imgDataUrl} alt=\"\" style={{ width: \"96px\", height: \"128px\" }}></img>\r\n    //           <div>{\"Page \" + (index + 1)}</div>\r\n    //         </div>\r\n    //       ))}\r\n    //     </div>\r\n    //     <div>\r\n    //       <input type=\"file\" ref={this.fileInput} onChange={this.readfiles} multiple></input>\r\n    //       <button onClick={() => { this.setState({ images: [] }) }}>Clear</button>\r\n    //       <button onClick={this.createPdf}>Generate PDF</button>\r\n    //     </div>\r\n    //     {this.state.lastError ?\r\n    //       <div>\r\n    //         <div>{this.state.lastError}</div>\r\n    //         <div>{this.state.lastMime}</div>\r\n    //       </div> : <div>{this.state.lastMime}</div>}\r\n    //     <div>{this.state.lastMime}</div>\r\n    //   </div>);\r\n  }\r\n\r\n  //https://labs.madisoft.it/javascript-image-compression-and-resizing/\r\n  /* resizeImage = async (file, width, height) => {\r\n    const blobURL = window.URL.createObjectURL(file);\r\n    const img = new Image();\r\n    img.src = blobURL;\r\n    img.onload = function (ev) {\r\n      window.URL.revokeObjectURL(blobURL); // release memory\r\n      // Use the img\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      const ctx = canvas.getContext('2d');\r\n      ctx.drawImage(img, 0, 0, width, height);\r\n    };\r\n\r\n  } */\r\n\r\n  clearSelection = () => {\r\n    let imgArr = [...this.state.images];\r\n    imgArr.forEach(img => {\r\n      img.selected = false;\r\n    });\r\n    this.setState({\r\n      images: imgArr\r\n    });\r\n  }\r\n\r\n  readfiles = async (fileList) => {\r\n    console.log(fileList.length);\r\n    \r\n    // 检查是否超过图片数量限制\r\n    if (this.state.images.length + fileList.length > MAX_IMAGES) {\r\n      this.setState({ \r\n        imageCountError: `无法添加图片。当前已有 ${this.state.images.length} 张图片，最多只能添加 ${MAX_IMAGES} 张图片。` \r\n      });\r\n      setTimeout(() => this.setState({ imageCountError: undefined }), 5000);\r\n      return;\r\n    }\r\n    \r\n    let imgArr = [];\r\n    let errorCount = 0;\r\n    \r\n    for (let i = 0; i < fileList.length; i++) {\r\n      console.log(\"Type: \" + fileList[i].type);\r\n      if (!(fileList[i].type === \"image/png\" || fileList[i].type === \"image/x-png\" || fileList[i].type === \"image/jpeg\" || fileList[i].type === \"image/webp\")) {\r\n        errorCount++;\r\n        continue;\r\n      }\r\n      \r\n      try {\r\n        const imgDataUrl = window.URL.createObjectURL(fileList[i]);\r\n        let uuid = this.uuidv4();\r\n        console.log(\"uuid: \" + uuid);\r\n        imgArr.push({ id: uuid, imgDataUrl, file: fileList[i], selected: false });\r\n      } catch (error) {\r\n        console.error(\"Error processing file:\", fileList[i].name, error);\r\n        errorCount++;\r\n      }\r\n    }\r\n    \r\n    if (errorCount > 0) {\r\n      this.setState({ \r\n        imageCountError: `有 ${errorCount} 个文件无法处理。请确保只选择 JPEG、PNG 或 WebP 格式的图片。` \r\n      });\r\n      setTimeout(() => this.setState({ imageCountError: undefined }), 5000);\r\n    }\r\n    \r\n    if (imgArr.length > 0) {\r\n      this.setState((state) => ({\r\n        images: [...state.images, ...imgArr]\r\n      }));\r\n    }\r\n  }\r\n\r\n  loadImage = (objUrl) => {\r\n    return new Promise((resolve, reject) => {\r\n      let img = new Image();\r\n      img.onload = () => {\r\n        resolve(img);\r\n      };\r\n      img.onerror = (e) => {\r\n        reject(e);\r\n      };\r\n      img.src = objUrl;\r\n    });\r\n  }\r\n\r\n  readExif(blob) {\r\n    EXIF.readFromBinaryFile(blob)\r\n  }\r\n\r\n  canvasToBlob(canvas, quality) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        canvas.toBlob(resolve, \"image/jpeg\", quality);\r\n      }\r\n      catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // scaleImage = async (pageWidth, pageHeight, pageMargin, dataURL) => {\r\n  //   let img = await this.loadImage(dataURL);\r\n\r\n  //   let scaleFactor = Math.min((pageWidth - pageMargin) / img.width, (pageHeight - pageMargin) / img.height);\r\n  //   let w = img.width * scaleFactor;\r\n  //   let h = img.height * scaleFactor;\r\n\r\n  //   let canvas = document.createElement('canvas');\r\n  //   let ctx = canvas.getContext('2d');\r\n  //   canvas.width = w;\r\n  //   canvas.height = h;\r\n  //   ctx.drawImage(img, 0, 0, w, h);\r\n  //   let blob = await this.canvasToBlob(canvas);\r\n  //   console.log(blob);\r\n  //   return await blob.arrayBuffer();\r\n  // }\r\n\r\n  fetchImage = async (dataURL, quality) => {\r\n    if (!quality) {\r\n      let res = await fetch(dataURL);\r\n      let raw = await res.arrayBuffer();\r\n      return {\r\n        arrayBuffer: raw,\r\n        mime: res.headers.get('content-type')\r\n      }\r\n    }\r\n    else {\r\n      let img = await this.loadImage(dataURL);\r\n      let canvas = document.createElement('canvas');\r\n      let ctx = canvas.getContext('2d');\r\n      canvas.width = img.width;\r\n      canvas.height = img.height;\r\n      ctx.drawImage(img, 0, 0, img.width, img.height);\r\n      let blob = await this.canvasToBlob(canvas, quality);\r\n      let raw = await blob.arrayBuffer();\r\n      // 获取原始MIME类型，但在压缩情况下默认使用jpeg\r\n      let originalMime = '';\r\n      try {\r\n        let originalRes = await fetch(dataURL);\r\n        originalMime = originalRes.headers.get('content-type') || '';\r\n      } catch (e) {\r\n        console.error('Failed to get original MIME type:', e);\r\n      }\r\n      return {\r\n        arrayBuffer: raw,\r\n        mime: originalMime || \"image/jpeg\"\r\n      };\r\n    }\r\n  }\r\n\r\n  createPdf = async () => {\r\n    let mime = \"\";\r\n    try {\r\n      this.setState({ busy: true });\r\n      const pdfDoc = await PDFDocument.create();\r\n      for (let i = 0; i < this.state.images.length; i++) {\r\n\r\n        let pageSize = this.getPageSize();\r\n\r\n        // if (this.state.pageSize !== Fit) {\r\n        //   const page = pdfDoc.addPage(pageSize);\r\n        //   const dim = await pdfDoc.embedPng(await this.scaleImage(page.getWidth(), page.getHeight(), this.state.pageMargin, this.state.images[i].imgDataUrl));\r\n        //   page.drawImage(dim, {\r\n        //     x: page.getWidth() / 2 - dim.width / 2,\r\n        //     y: page.getHeight() / 2 - dim.height / 2,\r\n        //     width: dim.width,\r\n        //     height: dim.height,\r\n        //   });\r\n\r\n        //   continue;\r\n        // }\r\n\r\n        // let loadedImage=await loadImage(this.state.images[i].imgDataUrl,{meta:true});\r\n        // console.log(\"loaded image \"+loadedImage);\r\n        // console.log(loadedImage);\r\n\r\n        let res = await this.fetchImage(this.state.images[i].imgDataUrl, this.state.compressImages ? this.state.imageQuality / 10 : undefined);\r\n        let raw = await res.arrayBuffer;\r\n\r\n        mime = res.mime;\r\n        console.log(mime);\r\n\r\n        let jpegOrientation = 1;\r\n\r\n        if (mime === 'image/jpeg') {\r\n          try {\r\n            let jpegExif = EXIF.readFromBinaryFile(raw);\r\n            if (jpegExif[\"Orientation\"]) {\r\n              jpegOrientation = jpegExif[\"Orientation\"];\r\n              console.log(\"jpegOrientation: \" + jpegOrientation);\r\n            }\r\n          }\r\n          catch (ex) { console.error(ex); }\r\n        }\r\n        //console.log(raw);\r\n        // 对于WebP图像，我们需要先将其转换为PNG格式再嵌入PDF\r\n        let embeddedImage;\r\n        if (mime === 'image/jpeg') {\r\n          embeddedImage = await pdfDoc.embedJpg(raw);\r\n        } else if (mime === 'image/webp') {\r\n          // WebP需要转换为PNG\r\n          try {\r\n            // 创建canvas来转换WebP到PNG\r\n            let img = await this.loadImage(this.state.images[i].imgDataUrl);\r\n            let canvas = document.createElement('canvas');\r\n            let ctx = canvas.getContext('2d');\r\n            canvas.width = img.width;\r\n            canvas.height = img.height;\r\n            ctx.drawImage(img, 0, 0);\r\n            \r\n            // 转换为PNG数据\r\n            let pngBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n            let pngArrayBuffer = await pngBlob.arrayBuffer();\r\n            embeddedImage = await pdfDoc.embedPng(pngArrayBuffer);\r\n          } catch (webpError) {\r\n            console.error('WebP conversion failed, falling back to direct embedding:', webpError);\r\n            embeddedImage = await pdfDoc.embedPng(raw);\r\n          }\r\n        } else {\r\n          // 其他情况默认按PNG处理\r\n          embeddedImage = await pdfDoc.embedPng(raw);\r\n        }\r\n        const img = embeddedImage;\r\n\r\n        console.log(\"width: \" + img.width + \" height: \" + img.height);\r\n\r\n        if (this.state.pageSize === Fit) {\r\n          pageSize = [img.width, img.height];\r\n        } else {\r\n          switch (jpegOrientation) {\r\n            case 6:\r\n            case 8:\r\n              pageSize = [pageSize[1], pageSize[0]];\r\n              break;\r\n          }\r\n        }\r\n        const page = pdfDoc.addPage(pageSize);\r\n        if (this.state.pageSize === Fit) {\r\n          page.drawImage(img, {\r\n            x: 0,\r\n            y: 0,\r\n            width: img.width,\r\n            height: img.height,\r\n          });\r\n        } else {\r\n          //page.setSize(pageSize[0], pageSize[1]);\r\n          let scaleFactor = Math.min((page.getWidth() - this.state.pageMargin) / img.width, (page.getHeight() - this.state.pageMargin) / img.height);\r\n          let w = img.width * scaleFactor;\r\n          let h = img.height * scaleFactor;\r\n\r\n          //page.setSize(img.width,img.height);\r\n          console.log(img.width + \" \" + img.height);\r\n          console.log(page.getWidth() + \" \" + page.getHeight());\r\n\r\n          let dim = img.scale(scaleFactor);\r\n\r\n          page.drawImage(img, {\r\n            x: page.getWidth() / 2 - dim.width / 2,\r\n            y: page.getHeight() / 2 - dim.height / 2,\r\n            width: dim.width,\r\n            height: dim.height,\r\n          });\r\n        }\r\n\r\n        switch (jpegOrientation) {\r\n          case 6:\r\n            page.setRotation(degrees(90));\r\n            break;\r\n          case 3:\r\n            page.setRotation(degrees(180));\r\n            break;\r\n          case 8:\r\n            page.setRotation(degrees(270));\r\n            break;\r\n        }\r\n      }\r\n      const pdfBytes = await pdfDoc.save();\r\n      let blob = new Blob([pdfBytes], { type: \"application/pdf\" });\r\n      // let url = window.URL.createObjectURL(blob);\r\n      // window.open(url);\r\n      var link = document.createElement('a');\r\n      link.href = window.URL.createObjectURL(blob);\r\n      var fileName = \"file.pdf\";\r\n      link.download = fileName;\r\n      link.click();\r\n      this.setState({ busy: false });\r\n    }\r\n    catch (err) {\r\n      console.error(err);\r\n      this.setState({ lastError: err, lastMime: mime, busy: false });\r\n    }\r\n  }\r\n\r\n  deletePage = id => {\r\n    console.log(\"To delete: \" + id);\r\n    let arr = [...this.state.images];\r\n    let indexPosition = -1;\r\n    arr.forEach((img, index) => {\r\n      if (img.id === id) {\r\n        indexPosition = index;\r\n      }\r\n    });\r\n    arr.splice(indexPosition, 1);\r\n    this.setState({\r\n      images: arr\r\n    });\r\n  }\r\n\r\n  handleDrop = (droppedId, currentId) => {\r\n    console.log(\"droppedId: \" + droppedId + \" currentId: \" + currentId);\r\n    let droppedIndex = -1;\r\n    let arr = [...this.state.images];\r\n    arr.forEach((img, index) => {\r\n      if (img.id === droppedId) {\r\n        droppedIndex = index;\r\n      }\r\n    });\r\n    let droppedImage = arr.splice(droppedIndex, 1)[0];\r\n    let currentIndex = -1;\r\n    arr.forEach((img, index) => {\r\n      if (img.id === currentId) {\r\n        currentIndex = index;\r\n      }\r\n    });\r\n    arr.splice(currentIndex, 0, droppedImage);\r\n    console.log(arr);\r\n\r\n    this.setState({\r\n      images: arr\r\n    });\r\n  }\r\n\r\n  getPageSize = () => {\r\n    switch (this.state.pageSize) {\r\n      case A4:\r\n        if (this.state.pageOrientation === Portrait) {\r\n          return PageSizes.A4;\r\n        }\r\n        else {\r\n          let pageSize = [...PageSizes.A4];\r\n          pageSize.reverse();\r\n          return pageSize;\r\n        }\r\n      case Letter:\r\n        if (this.state.pageOrientation === Portrait) {\r\n          return PageSizes.Letter;\r\n        }\r\n        else {\r\n          let pageSize = [...PageSizes.Letter];\r\n          pageSize.reverse();\r\n          return pageSize;\r\n        }\r\n      default:\r\n        return undefined;\r\n    }\r\n  }\r\n\r\n  getAspectRatio = () => {\r\n    let pageSize = this.getPageSize();\r\n    return pageSize[0] / pageSize[1];\r\n  }\r\n\r\n  // getPreviewImageSize = (pageWidth, pageHeight, imageWidth, imageHeight) => {\r\n  //   let pageSize = this.getPageSize();\r\n  //   let margin = this.state.pageMargin * pageHeight / pageSize[1];\r\n  //   let scaleFactor = Math.min((pageWidth - margin) / img.width, (pageHeight - margin) / img.height);\r\n  //   let w = imageWidth * scaleFactor;\r\n  //   let h = imageHeight * scaleFactor;\r\n  //   return [w, h];\r\n  // }\r\n\r\n  // getPreviewPageSize = () => {\r\n  //   return {\r\n  //     height: 192,\r\n  //     width: 192 * this.getAspectRatio()\r\n  //   };\r\n  // }\r\n\r\n  // getMaxImageSize=()=>{\r\n  //   let maxWidth = -1;\r\n  //   let maxHeight = -1;\r\n  //   this.state.images.forEach(image => {\r\n  //     if (image.width > maxWidth) maxWidth = image.width;\r\n  //     if (image.height > maxWidth) maxHeight = image.height;\r\n  //   });\r\n  //   return {\r\n  //     width: maxWidth,\r\n  //     height: maxHeight\r\n  //   };\r\n  // }\r\n\r\n  /* createPdf = async () => {\r\n    const pdfDoc = await PDFDocument.create();\r\n    this.createPage(pdfDoc, 1);\r\n  }\r\n\r\n  createPage = (pdfDoc, index) => {\r\n    this.embedImage(pdfDoc, index).then(() => {\r\n      if (index > this.state.images.length) {\r\n        pdfDoc.save().then((blob) => {\r\n          var link = document.createElement('a');\r\n          link.href = window.URL.createObjectURL(blob);\r\n          var fileName = \"file.pdf\";\r\n          link.download = fileName;\r\n          link.click();\r\n        });\r\n      }\r\n      this.createPage(pdfDoc, index + 1);\r\n    });\r\n  }\r\n\r\n  embedImage = async (pdfDoc, index) => {\r\n    if (index > this.state.images.length) return;\r\n    let raw = await (await fetch(this.state.images[index - 1])).blob();\r\n    const img = await pdfDoc.embedJpg(raw);\r\n    const page = pdfDoc.addPage();\r\n    page.drawImage(img, {\r\n      x: 0,\r\n      y: 0,\r\n      width: page.getWidth(),\r\n      height: page.getHeight(),\r\n    });\r\n  } */\r\n\r\n  uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n      let r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}